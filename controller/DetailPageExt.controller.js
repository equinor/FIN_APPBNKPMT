/*
 * Copyright (C) 2009-2020 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["fin/ap/approvebankpayments/model/formatter","fin/ap/approvebankpayments/model/PopoverHandler","fin/ap/approvebankpayments/controller/detail/batch/BatchDetailPageExt","fin/ap/approvebankpayments/controller/detail/payment/PaymentDetailPageExt"],function(f,P,B,a){"use strict";function _(t,s){return t.substring(t.length-s.length)===s;}function b(t,s){return t.indexOf(s)!==-1;}function c(i){return _(i,"::C_AbpPaymentBatch");}function d(i){return _(i,"::C_AbpPayment")||_(i,"::C_AprvBkPaytExcludedPayment")||b(i,"::C_AbpPayment");}function D(){}D.prototype.formatter=f;D.prototype.onInit=function(e){var g=this.getOwnerComponent();this._hideExtraActions();this._popoverHandler=new P(this.getView());var i=e.getParameter("id");if(c(i)){this.batchPageExt=new B(g,this.getView(),this.extensionAPI);this.batchPageExt.onInit();}else if(d(i)){this.paymentPageExt=new a(g,this.getView(),this.extensionAPI);this.paymentPageExt.onInit();}};D.prototype.onExit=function(e){this._popoverHandler.onExit();var i=e.getParameter("id");if(c(i)){this.batchPageExt.onExit();}else if(d(i)){this.paymentPageExt.onExit();}};D.prototype.onBeforeRebindTableExtension=function(e){var i=e.getParameter("id");if(b(i,"C_AbpPayment--to_Invoice")){this.paymentPageExt.onBeforeRebindTableExtension(e);}};D.prototype.onApproveBatch=function(){this.batchPageExt.onProcessBatch("app");};D.prototype.onRejectBatch=function(){this.batchPageExt.onProcessBatch("rej");};D.prototype.onDeferBatch=function(){this.batchPageExt.onProcessBatch("def");};D.prototype.onReturnBatch=function(){this.batchPageExt.onProcessBatch("ret");};D.prototype.onUndoBatch=function(){this.batchPageExt.onUndoBatch();};D.prototype.onSubmitBatch=function(){this.batchPageExt.onSubmitBatch();};D.prototype.onEditBatch=function(){this.batchPageExt.onEditBatch();};D.prototype.onEditPayment=function(){this.paymentPageExt.onEditPayment();};D.prototype.onEditPaymentInstructionKey=function(){this.paymentPageExt.onEditPaymentInstructionKey();};D.prototype.onResetPaymentStatus=function(){this.paymentPageExt.resetPayment();};D.prototype.onDeferPayment=function(){this.paymentPageExt.deferPayment();};D.prototype.onRejectPayment=function(){this.paymentPageExt.rejectPayment();};D.prototype.onBeforeDocumentPopoverOpens=function(e){this._popoverHandler.onBeforeDocumentPopoverOpens(e);};D.prototype.onPayeeNavigationTargetsObtained=function(e){this._popoverHandler.onPayeeNavigationTargetsObtained(e);};D.prototype.onBeforePayeePopoverOpens=function(e){this._popoverHandler.onBeforePayeePopoverOpens(e);};D.prototype.onBeforePaymentPopoverOpens=function(e){this._popoverHandler.onBeforePaymentPopoverOpens(e);};D.prototype.onPayeeBankNavigationTargetsObtained=function(e){this._popoverHandler.onPayeeBankNavigationTargetsObtained(e);};D.prototype.onBeforePayeeBankPopoverOpens=function(e){this._popoverHandler.onBeforePayeeBankPopoverOpens(e);};D.prototype._hideExtraActions=function(){var e=["delete","edit","template:::ObjectPageAction:::DisplayActiveVersion"];var h=this.byId("objectPageHeader");e.forEach(function(i){var g=this.byId(i);if(h&&g){g.unbindProperty("enabled");g.setEnabled(false);g.unbindProperty("visible");g.setVisible(false);}}.bind(this));};return sap.ui.controller("fin.ap.approvebankpayments.controller.DetailPageExt",new D());},true);
