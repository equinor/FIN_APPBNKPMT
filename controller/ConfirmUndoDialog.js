/*
 * Copyright (C) 2009-2020 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/base/Object","sap/ui/Global","sap/ui/model/json/JSONModel"],function(B,U,J){"use strict";var c="fin.ap.approvebankpayments.view.ConfirmUndoDialog";return B.extend("fin.ap.approvebankpayments.controller.ConfirmUndoDialog",{_resolve:null,_reject:null,constructor:function(v,a){this._resourceBundle=v.getModel("@i18n").getResourceBundle();this._oDialog=U.xmlfragment(v.createId("ConfirmUndoDialog"),c,this);v.addDependent(this._oDialog);this._oDialog.setModel(new J(this._getModel(a)),"action");return new Promise(function(r,R){this._resolve=r;this._reject=R;this._oDialog.open();}.bind(this));},onUndoDialogOkPress:function(){this._oDialog.close();this._resolve({unprocessOnly:false});},onUndoDialogPartialPress:function(){this._oDialog.close();this._resolve({unprocessOnly:true});},onUndoDialogCancelPress:function(){this._oDialog.close();this._reject();},onAfterUndoClose:function(){this._oDialog.destroy();},_getModel:function(a){var i=Array.isArray(a);var m={message:this._resourceBundle.getText(i?"confirmUndoMultiselectBatch":"confirmUndoBatch"),title:this._resourceBundle.getText("confirmUndoChanges"),extraUndo:false};if(i&&a.length>1){m.message=this._resourceBundle.getText("confirmUndoMultiselectBatches",a.length);}else{this._adjustSingleBatchModel(m,(i?a[0]:a).getProperty());}return m;},_adjustSingleBatchModel:function(m,b){var p=(b.ApprovalIsFirst||b.IsReturnedApproval)&&b.PaymentBatchIsEdited;if(p&&!b.PaymentBatchIsProcessed){m.message=this._resourceBundle.getText("confirmUndoPayments");}else if(p&&b.PaymentBatchIsProcessed){m.title=this._resourceBundle.getText("confirmKeepOrDiscard");m.message=this._resourceBundle.getText("discardOrKeepQuestion");m.extraUndo=true;}}});});
